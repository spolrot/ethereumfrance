---
ID: 1081
post_title: 'Point d&rsquo;étape The DAO : soft fork, hard fork ou sauvetage ?'
author: Simon Polrot
post_excerpt: ""
layout: post
permalink: >
  https://www.ethereum-france.com/point-detape-the-dao-soft-fork-hard-fork-ou-sauvetage/
published: true
post_date: 2016-06-22 10:48:58
---
<span style="font-weight: 400;">Le vendredi 17 juin 2016,</span><a href="https://www.ethereum-france.com/the-dao-retour-sur-12-tres-longues-heures/"> <span style="font-weight: 400;">The DAO a subi une attaque informatique sophistiquée</span></a><span style="font-weight: 400;"> visant à subtiliser les ethers qui y avaient été envoyés par les nombreuses personnes qui avaient</span><a href="https://www.ethereum-france.com/comment-participer-a-la-souscription-creation-the-dao/"> <span style="font-weight: 400;">participé à sa création</span></a><span style="font-weight: 400;">. Plus de 3,6 millions d'ethers ont ainsi été subtilisés en quelques heures, sur les 12 millions récoltés par l'</span><a href="https://www.ethereum-france.com/dao-kezako-comprendre-lorganisation-autonome-decentralisee/"><span style="font-weight: 400;">organisation autonome décentralisée</span></a><span style="font-weight: 400;">. </span><span style="font-weight: 400;">S'ensuivit une réaction exceptionnelle des créateurs d'</span><i><span style="font-weight: 400;">Ethereum</span></i><span style="font-weight: 400;">, de </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;">, de </span><i><span style="font-weight: 400;">slock.it</span></i><span style="font-weight: 400;">, afin de trouver une parade à ce piratage. Compte tenu du code déployé et de la faille utilisée, un délai de 27 jours leur était accordé avant que les fonds ne puissent être définitivement récupérés par le pirate.</span>

<span style="font-weight: 400;">A situation exceptionnelle, mesures exceptionnelles. Après quelques heures, Vitalik Buterin, créateur d'Ethereum,</span><a href="https://blog.ethereum.org/2016/06/17/critical-update-re-dao-vulnerability/"> <span style="font-weight: 400;">poste sur le blog de la Fondation</span></a><span style="font-weight: 400;"> pour évoquer les solutions envisagées par la communauté : un </span><i><span style="font-weight: 400;">soft fork (</span></i><span style="font-weight: 400;">modification du comportement des mineurs dans le futur pour empêcher le voleur de récupérer les fonds)</span> <span style="font-weight: 400;">puis</span> <span style="font-weight: 400;">un </span><i><span style="font-weight: 400;">hard fork </span></i><span style="font-weight: 400;">(modification de la blockchain existante pour récupérer les ethers volés).</span>

<span style="font-weight: 400;">Les implications de ces deux options étant très lourdes notamment en terme de conséquences à long terme sur la perception de la blockchain Ethereum, un gros débat s'est engagé depuis vendredi dans la communauté pour déterminer si oui ou non les </span><i><span style="font-weight: 400;">forks</span></i><span style="font-weight: 400;"> devaient être mis en oeuvre, ou si l'on devait simplement abandonner ces ethers volés et même l'ensemble des ethers aujourd'hui localisés dans The DAO, qui restaient vulnérables à une autre attaque (soit plus de 11 millions  d'ethers sur les 81 millions existants).</span>

<span style="font-weight: 400;"><img class="alignright size-full wp-image-1084" src="https://www.ethereum-france.com/wp-content/uploads/2016/06/White-Hat.png" alt="White Hat" width="270" height="272" />Cette nuit, une troisième option a été appliquée spontanément par un groupe de "gentils" hackeurs (on parle de </span><i><span style="font-weight: 400;">white hat hackers</span></i><span style="font-weight: 400;">) : la réplication du hack qui avait été mis en oeuvre par le voleur pour récupérer les ethers qui restaient dans The DAO (à peu près 7,2 millions d'ethers) et les mettre en sureté pour éviter un autre hack. Les personnes qui ont lancé cette attaque coordonnée, dont un certain nombre sont identifiées (Alex Van de Sande et Fabian Vogelsteller notamment), ont agi en tant qu'individus et non au nom de la Fondation, qui n'a pas approuvé l'initiative. Ces "chevaliers blancs" venus sauver les ethers en danger se font d'ailleurs appeler </span><i><span style="font-weight: 400;">Robin Hood</span></i><span style="font-weight: 400;">... En pratique, on assiste à une vraie guerre des DAO !</span>

<span style="font-weight: 400;">Si la moralité et les motivations de cette attaque, qui consiste tout de même à se faire justice soi-même en utilisant les mêmes méthodes que les hackers, peut être questionnée, son résultat est aujourd’hui que :</span>
<ul>
 	<li><span style="font-weight: 400;">Le hacker possède 3,6 millions d’ethers dans une sous-DAO, bloqués pendant encore 23 jours.</span></li>
 	<li><span style="font-weight: 400;">Les </span><i><span style="font-weight: 400;">white hat hackers</span></i><span style="font-weight: 400;"> possèdent 7,2 millions d’ethers dans une sous-DAO théoriquement contrôlée par des « </span><i><span style="font-weight: 400;">gentils </span></i><span style="font-weight: 400;">», qui sont également bloqués, pendant une durée d’au moins 27 jours.</span></li>
 	<li><span style="font-weight: 400;">Le reste des éthers est disséminé dans des sous-DAO diverses et dans la DAO d’origine.</span></li>
</ul>
<span style="font-weight: 400;">Une nouvelle proposition est également présentée par ces « </span><i><span style="font-weight: 400;">gentils </span></i><span style="font-weight: 400;">» hackers : effectuer un soft fork dont l’objectif est d’empêcher tout le monde sauf des gentils hackers identifiés d’interagir avec le code des DAO. Cela leur permettrai de répliquer l’attaque du hacker contre lui-même (et donc de récupérer les 3,6 millions d’éthers logés dans sa DAO) sans que celui-ci ne puisse réagir, puis de les rendre aux détenteurs de tokens.</span>

<span style="font-weight: 400;">Les choix qui s’offrent à la communauté aujourd’hui sont donc les suivants :</span>
<ul>
 	<li><span style="font-weight: 400;">Ne rien faire. Dans ce cas, les gentils hackers ont promis de rendre les ethers qu’ils ont récupéré, soit 7,2 millions d’ethers. Cela correspond à environ 0.68 ether pour 100 tokens DAO, et limiterait la perte des investisseurs DAO à 30 % de leur investissement initial.</span></li>
 	<li><span style="font-weight: 400;">Effectuer un </span><i><span style="font-weight: 400;">soft-fork</span></i><span style="font-weight: 400;"> pour empêcher toute interaction avec le code de </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;"> ou les sous-DAO, sauf pour certains comptes identifiés considérés comme « gentils ». Ceux-ci pourraient alors, avec une série d’opérations successives qui prendront quelques mois, récupérer 3,6 + 7,2 millions d’ethers pour les redistribuer à la communauté. La perte des investisseurs dans The DAO serait alors </span><i><span style="font-weight: 400;">quasiment</span></i><span style="font-weight: 400;"> effacée (hors ether localisé dans les sous-DAO et The DAO) et les ethers rendus à leurs propriétaires d’origine.</span></li>
 	<li><span style="font-weight: 400;">Mettre en oeuvre la solution initiale d’un </span><i><span style="font-weight: 400;">soft fork</span></i><span style="font-weight: 400;"> pour geler ensemble des fonds localisés dans les DAO, y compris les sous-DAO, pour tout le monde.
</span><span style="font-weight: 400;">Cette dernière solution serait éventuellement suivie d’un </span><i><span style="font-weight: 400;">hard fork </span></i><span style="font-weight: 400;">sur le code de la DAO pour récupérer l’ensemble des fonds, y compris ceux qui sont disséminés dans différentes sous-DAO et ceux encore logés dans The DAO. Dans ce contexte, l’ensemble des investisseurs seraient garantis de récupérer tout leur investissement de départ en ether.</span></li>
</ul>
<strong><span style="font-weight: 400;">Les débats ne sont donc pas terminés, et nul doute que de nombreuses discussions auront lieu dans la communauté pendant les jours qui viennent. La position de Vitalik Buterin sur l’attaque des gentils hackers est à ce titre très attendue. La décision finale d’implémentation des <em>soft/hard forks</em> sera de toute façon prise </span><i><span style="font-weight: 400;">in fine</span></i><span style="font-weight: 400;"> par les mineurs, qui choisiront les blocs et les transactions qui seront validées ou non… En tout état de cause l’attaque </span><i><span style="font-weight: 400;">white hat </span></i><span style="font-weight: 400;">semble déjà avoir rendu une partie de leur confiance aux investisseurs : le cours de l’ether a explosé cette nuit.</span></strong>