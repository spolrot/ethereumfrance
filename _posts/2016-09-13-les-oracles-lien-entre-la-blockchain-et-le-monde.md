---
ID: 1386
post_title: >
  Les Oracles, lien entre la blockchain et
  le monde
author: Simon Polrot
post_excerpt: ""
layout: post
permalink: >
  https://www.ethereum-france.com/les-oracles-lien-entre-la-blockchain-et-le-monde/
published: true
post_date: 2016-09-13 07:47:10
---
Le potentiel d'Ethereum se réalisera (ou non) par l'usage qui sera fait <a href="https://www.ethereum-france.com/smart-contract-ou-le-contrat-auto-executant/"><span style="text-decoration: underline;">des "smart-contracts"</span></a>, programmes informatiques qui s'exécutent de façon décentralisée et qui apportent au protocole une polyvalence inégalée. Pour la mise en oeuvre de nombreux cas d'usages, le <em>smart-contract</em> doit cependant pouvoir s'exécuter en fonction de données existantes <em>à l'extérieur</em> de la blockchain : qui a gagné ce match, quel est le cours EUR/USD à un instant T, quel temps fait-il, le verrou électronique est-il ouvert, etc. Or, ces données ne sont pas accessibles sur une blockchain, qui ne peut pas, par construction, récupérer directement l'information sur une source de données externes. Pour ces points de contact entre la blockchain et le monde réel, le concept d'Oracle a été inventé.
<h1><strong>La blockchain est aveugle au monde extérieur</strong></h1>
La technologie couramment appelée "blockchain" ne permet pas la collecte de données depuis une source externe, et Ethereum n'y fait pas exception. C'est le fonctionnement même de la blockchain qui y fait obstacle. En effet, chaque participant à la blockchain doit pouvoir reconstituer à n'importe quel moment les différentes transactions qui s'y sont déroulées afin d'en vérifier l'intégrité. Pour cela, chaque bloc de transactions est lié au suivant par son empreinte ou <em>hash</em>, qui permet d'établir la continuité de la blockchain.

Que se passe-il si le protocole d'une blockchain fait appel à un service extérieur ? L'une des transactions d'un bloc X sera dépendante du contenu de ce service externe. A chaque fois qu'une personne téléchargera la blockchain, un nouvel appel sera effectué à ce service externe, ce qui pose déjà un problème de charge pour ce service. Mais le vrai souci se pose si ledit service n'offre plus la donnée (il est hors ligne, piraté, etc.) ou si il répond avec une autre donnée : le bloc X ne peux pas se résoudre de la même façon que la première fois. Son contenu et donc son empreinte n'est plus identique, et le lien entre lui et le bloc X+1 n'est plus valide. Il en est de même pour les suivants. Cela peut se produire six mois, un an, dix ans après la validation du bloc X. L'ensemble de la blockchain créée après ce bloc ne peut alors plus être vérifiée et l'immutabilité de la blockchain est remise en cause.

Pour cette raison, aucune fonction d'Ethereum ou d'aucune autre blockchain ne permet de faire appel à un service extérieur. La blockchain est donc par construction aveugle au monde extérieur.
<h1><strong>L'Oracle éclaire la blockchain de son savoir</strong></h1>
L'Oracle, c'est un service chargé d'entrer manuellement une donnée extérieure dans la blockchain. A l'instant T, qui aura été défini à l'avance, le service va récupérer l'information qui lui a été demandée et l'insère dans la blockchain à l'endroit qui lui a été désigné. Lorsque le <em>smart-contract</em> qui requiert cette donnée s'exécute (après l'instant T), il va chercher la donnée sur la blockchain, à l'adresse prévue, et s'exécute en fonction de cette donnée.
<p style="padding-left: 30px;"><em>Par exemple, l'Oracle a entré à minuit, le 8 juillet 2016 à l'adresse 0x3615087316813abba... que la France a gagné 2-0 contre l'Allemagne à l'Euro. Lors de son exécution le 9 juillet, le smart-contract de pari qui fait appel à cette information en déduit que le parieur A a perdu car il avait envoyé une transaction pariant sur l'Allemagne, alors que B, qui avait envoyé une transaction pariant sur la France, a gagné et doit récupérer ses gains, qui lui sont automatiquement envoyés. </em></p>
Bien entendu, cette intervention d'un Oracle, pour pratique qu'elle soit, pose des nombreuses question : Qui est cet oracle ? comment lui faire confiance ? Ne s'agit-il pas de la réintroduction d'un tiers de confiance dans une technologie qu'on vante <a href="https://blockchainfrance.net/2016/07/20/la-fin-de-lideal-trustless/"><span style="text-decoration: underline;">(vantait ?)</span></a> comme <em>trustless</em> ? Que se passe-il si l'information n'est pas ajoutée par l'Oracle, ou si elle est fausse ?
<h1><strong>Le pouvoir exorbitant du tiers-Oracle est un facteur d'attaque potentiel</strong></h1>
Le système d'Oracle implique le recours à une personne ou une société tierce partie dont le rôle est de rechercher d'insérer l'information demandée. Il est <em>a priori</em> rémunéré pour le faire. Cette personne peut être désignée par les participants au <em>smart-contract</em>, si elles se connaissent et le contrat prévoit cette possibilité, ou par le créateur dudit <em>smart-contract</em>, à l'avance.

[caption id="attachment_1397" align="alignright" width="300"]<img class="wp-image-1397 size-medium" src="https://www.ethereum-france.com/wp-content/uploads/2016/09/Oracle-de-Delphes-300x295.jpg" alt="L'oracle de Delphes prédit l'avenir d'Oedipe" width="300" height="295" /> L'oracle de Delphes avait prédit (décidé ?) l'avenir d'Oedipe et sa fin tragique[/caption]

<em>In fine</em>, le recours à un Oracle revient à introduire un tiers de confiance, au pouvoir aussi exorbitant que son équivalent mythologique : il décide seul de l'issue des <em>smart-contracts, </em>qui sont par principe impossibles à arrêter... Mais à l'inverse de son homologue de Delphes, il peut faillir ; et de plusieurs façons :
<ul>
 	<li>Il n'envoie aucune information dans la blockchain, il est déficient. Dans ce cas, le contrat ne pourra jamais s'exécuter. Il faut que les concepteurs du contrat aient prévu une porte de sortie pour ce cas de figure ; par exemple si aucune information n'a été entrée par l'Oracle à l'instant T, le contrat est annulé et chacun récupère sa mise de départ. Si rien n'a été prévu, le risque existe que les sommes éventuellement bloquées soient définitivement perdues.</li>
 	<li>Il envoie par erreur ou de façon volontaire une information inexacte, par exemple parce que l'exécution conformément à cette fausse information a un intérêt pour lui. Dans ce cas, il est impossible de revenir en arrière, sauf à ce que le contrat prévoie une porte de sortie. L'information est entrée et enregistrée définitivement dans la blockchain ; et le programme va s'exécuter en prenant comme base cette information.</li>
</ul>
<h1><strong>Qui contrôle l'Oracle ?</strong></h1>
Pour limiter le pouvoir de l'Oracle, plusieurs structures plus ou moins complexes ont été envisagées.
<ul>
 	<li>Si la donnée est disponible sur un serveur, il est possible d'avoir recours à un service dit <em>provable-honest<span style="text-decoration: underline;">,</span> </em>qui permet de s'assurer de la validité de la donnée entrée. C'est notamment ce que propose la société <a href="http://www.oraclize.it/"><span style="text-decoration: underline;"><em>Oraclize</em></span></a>, qui fonctionne comme l'indique le schéma suivant.

[caption id="" align="aligncenter" width="800"]<a href="https://blog.oraclize.it/understanding-oracles-99055c9c9f7b#.d33joufkr"><img class="size-large" src="https://d262ilb51hltx0.cloudfront.net/max/800/0*5qiPf50N-wSYXZa9.png" alt="Le fonctionnement d'Oraclize" width="800" height="702" /></a> Le fonctionnement d'Oraclize[/caption]

<em>Oraclize</em> et les oracles similaires fonctionnent avec une "preuve d'honnêteté" (<em>TLS Notary proof</em>) qui garantit que la donnée entrée sur la blockchain est identique à celle qui a été récupérée par Oraclize. Comme la blockchain, cette preuve est publique et vérifiable par l'utilisation de méthodes cryptographiques. Cela signifie que si Oraclize entre un jour dans la blockchain une donnée non-conforme à la donnée récupérée sur le serveur, cette information "malhonnête" sera immédiatement repérable par n'importe quelle personne au fait de ces techniques. Ici, c'est la nécessité pour l'Oracle de conserver sa réputation à long terme qui garantit la fiabilité de ses prédictions.</li>
 	<li>L'Oracle basé sur le consensus (consensus-based oracle) consiste à déporter le processus de collecte et d'envoi de l'information à un grand nombre de participants qui ont une motivation particulière à fournir la réponse correcte. Les sociétés <a href="https://media.consensys.net/2016/06/01/a-visit-to-the-oracle/"><span style="text-decoration: underline;">Gnosis</span></a> et <a href="https://www.augur.net/"><span style="text-decoration: underline;">Augur</span></a> travaillent notamment sur des marchés prédictifs qui ont également pour vocation de servir d'Oracles à une multitude de contrats. Ce modèle est plus complexe mais pourrait permettre, à terme, de fournir une information fiable de façon entièrement décentralisée : ces marché prédictifs fonctionnent en effet directement sur Ethereum !</li>
</ul>
Enfin, l'oracle physique est une solution complémentaire voire indispensable lorsque la donnée nécessaire est une donnée physique particulière : la porte X est-elle ouverte ? quelle température fait-il à tel endroit ? Il est ici impossible de demander à une ou plusieurs personne de valider cette information spécifique. Il faut alors faire confiance à un objet qui mesure la donnée physique et à un mécanisme permettant de s'assurer que la donnée n'a pas été modifiée avant l'envoi sur la blockchain. La société Ledger, notamment, <a href="https://blog.ledger.co/hardware-oracles-bridging-the-real-world-to-the-blockchain-ca97c2fc3e6c#.7sxi7v3vw"><span style="text-decoration: underline;">travaille sur un concept d'Oracle physique</span></a>.

Ces mécanismes, loin de régler l'ensemble des problèmes posés par les oracles, laissent cependant entrevoir des solutions pragmatiques. Des constructions plus complexes peuvent également être imaginés, par exemple un appel à un second Oracle si l'une des parties à un smart-contract conteste le résultat entré par le premier, ou encore un mécanisme de résolution de conflits d'Oracles automatisés...  Quoi qu'il en soit, il ne fait aucun doute que les Oracles, publics ou privés, vont jouer un rôle déterminant dans le développement des applications décentralisées les plus ambitieuses.

<em>Si vous êtes intéressés par ces questions, je vous recommande également la lecture des articles suivants, en anglais :</em>
<ul>
 	<li><em><a href="https://blog.ethereum.org/2014/07/22/ethereum-and-oracles/"><span style="text-decoration: underline;">Ethereum and Oracles</span></a>, par Vitalik Buterin, sur le blog officiel de la Fondation</em></li>
 	<li><em><a href="https://media.consensys.net/2016/06/01/a-visit-to-the-oracle/"><span style="text-decoration: underline;">A Visit to the Oracle</span></a>, par Matt Liston sur ConsenSys Media</em></li>
 	<li><em><a href="https://blog.oraclize.it/understanding-oracles-99055c9c9f7b#.opow7w9ok"><span style="text-decoration: underline;">Understanding Oracles</span></a>, sur le blog officiel d'Oraclize.it</em></li>
</ul>