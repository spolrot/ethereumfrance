---
ID: 1102
post_title: >
  To fork or not to fork, telle est la
  question !
author: Simon Polrot
post_excerpt: ""
layout: post
permalink: >
  https://www.ethereum-france.com/to-fork-or-not-to-fork-telle-est-la-question/
published: true
post_date: 2016-06-27 19:11:41
---
<p style="text-align: left;"><strong>Depuis une semaine, l’écosystème Ethereum est en ébullition. À la suite du piratage du contrat de <i>The DAO</i> et du vol subséquent de plus de 3,6 millions d’ethers par un hacker non identifié, une question déchire la communauté : faut-il agir pour corriger les effets de ce piratage ? Faut il (<em>hard</em>-)<i>forker,</i> ou non ? Pour y voir plus clair, analyse rapide des arguments pro et anti-fork.</strong></p>
<p style="text-align: left;"><span style="font-weight: 400;">Pour rappel, le </span><i><span style="font-weight: 400;">fork</span></i><span style="font-weight: 400;"> est une opération par laquelle les mineurs d’une blockchain décident, par consensus, de modifier les règles du protocole d’une blockchain. Cette modification peut être de tout ordre : correction d’un bug, ajout d’une fonctionnalité ou même modification des transactions passées enregistrées sur la blockchain. Un hard-fork peut faire exception au principe d’immuabilité de la blockchain lorsqu’il a pour but de modifier des transactions passées, et il est nécessaire pour permettre l’évolution technique du protocole. <a href="https://www.ethereum-france.com/homestead-est-arrive/"><span style="text-decoration: underline;">Ethereum a déjà connu un hard-fork majeur</span> </a></span><span style="font-weight: 400;">le 14 mars 2016, au moment du passage de la version Frontier à Homestead</span><span style="font-weight: 400;">.</span></p>
<p style="text-align: left;"><span style="font-weight: 400;">Pour régler la situation difficile dans laquelle se trouve l’écosystème Ethereum depuis le piratage, deux forks ont été proposés :</span></p>

<ul style="text-align: left;">
 	<li style="font-weight: 400;"><span style="font-weight: 400;">un <em>soft-fork</em>, ne valant que pour le futur, et bloquant les transactions depuis et vers les contrats DAO. Ce soft-fork a pour effet de « geler » les transactions des contrats de The DAO et de bloquer les fonds correspondants (11,6 millions d’ethers). Ce soft-fork a surtout pour objet d’empêcher le pirate de faire plus de dégâts et de laisser plus de temps à la communauté pour réagir.</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">un <em>hard-fork</em>, valant pour le futur et pour le passé, modifiant la structure de la blockchain pour récupérer les ethers volés et les redistribuer aux détenteurs de tokens de </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;">.</span></li>
</ul>
<p style="text-align: left;"><b>Le premier fork envisagé, le </b><b><i>soft fork</i></b><b>, est aujourd’hui acté</b><span style="font-weight: 400;">. Les mineurs ont décidé de l’appliquer à la très grande majorité. Cette décision a été prise par les mineurs individuels, en mettant à jour leur logiciel de minage, et par les pools, qui ont organisé des votes (avec une participation autour de 20 %, les votes étaient à large majorité pour le soft-fork). Le soft-fork entrera en vigueur dans quelques jours, et les fonds localisés sur les DAO seront donc bloqués pour une durée indéterminée : ni le hacker ni les détenteurs légitimes de tokens ne pourront accéder aux ethers localisés sur ces comptes.</span></p>
<p style="text-align: left;"><span style="font-weight: 400;">Le débat reste cependant ouvert sur la mise en œuvre du </span><i><span style="font-weight: 400;">hard fork</span></i><span style="font-weight: 400;">, qui a des conséquences plus lourdes et qui nécessite de modifier pour le passé les inscriptions sur la blockchain. Dans ce débat, c'est bien plus que les fonds de The DAO qui sont en jeu. Le </span><i><span style="font-weight: 400;">hard-fork</span></i><span style="font-weight: 400;"> signifie revenir sur l'un des principes de la blockchain, son immuabilité, pour un cas particulier. Les débats ont été houleux ces dernières semaines et les arguments pour et contre le hard-fork de sauvetage de </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;"> peuvent se résumer comme suit.</span></p>
<p style="text-align: left;"><span style="font-weight: 400;">
<img class="alignright size-full wp-image-1112" src="https://www.ethereum-france.com/wp-content/uploads/2016/06/giphy.gif" alt="giphy" width="245" height="160" />Pour les opposants au hard-fork, les trois arguments principaux avancés sont :</span></p>

<ul>
 	<li><strong>Immuabilité</strong><span style="font-weight: 400;">. Le hard-fork constitue une entorse inacceptable au principe d'immuabilité des transactions passées sur la blockchain. Ce principe, dont découle celui selon lequel "</span><i><span style="font-weight: 400;">Code is Law</span></i><span style="font-weight: 400;">", qui donne tout son intérêt à la blockchain Ethereum, et y renoncer pour ce cas particulier équivaut à y renoncer pour le futur : à partir du moment où une exception aura été faite pour </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;"><span style="font-weight: 400;">, qu'on aura modifié l'état de la blockchain pour corriger les effets d'un piratage, la brèche sera ouverte.</span></span><span style="font-weight: 400;">Cet argument s'appuie également sur le fait que le piratage de <i>The DAO</i></span><span style="font-weight: 400;"><span style="font-weight: 400;"> n’est pas un problème posé par Ethereum mais bien un problème dans la façon dont a été codé le contrat de cette DAO en particulier. Si l’on intervient pour ce contrat spécifique, comment déterminer ensuite les critères d’intervention pour les prochains contrats ? Va-t-on devoir corriger l’ensemble des bugs de smart-contracts rétroactivement ?</span></span>Si l'on procède au hard fork, on peut imaginer que n'importe qui (État, société importante sur la blockchain, etc.) pourrait demander à la Fondation et/ou aux mineurs d'effectuer un hard-fork pour eux, et ceux-ci ne seront pas en mesure de refuser, du fait du précédent qu'aura été <em>The DAO</em>. À terme, c'est toute la crédibilité de la blockchain Ethereum qui sera mise à mal. C'est la fin d'Ethereum.<em> </em></li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Responsabilité individuelle</strong><span style="font-weight: 400;">. Chacun doit être responsable de ses actes. Les personnes qui ont financé The DAO n'ont pas lu le code correctement et leur perte a été causée par leur inconséquence. Ceux qui l'auraient lu correctement auraient pu anticiper le piratage. Dans tous les cas, l'investissement dans The DAO était un investissement extrêmement risqué et tous les investisseurs avaient été prévenus. Si l'on corrige les effets du piratage, les investisseurs n'apprendront pas les leçons de leur erreur et réinvestiront dans un fonds non-sécurisé.</span></li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Démocratie</strong><span style="font-weight: 400;">. La décision de pousser le </span><i><span style="font-weight: 400;">hard-fork</span></i><span style="font-weight: 400;"> est prise par les mineurs à l'initiative de la Fondation. Ce mode de prise de décision est injuste car il ne prend pas en compte l'intérêt de l'ensemble des acteurs de la blockchain Ethereum (développeurs, utilisateurs, détenteurs de fonds qui n'ont pas participé à </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;">…). Par conséquent, une telle décision ne devrait pas être prise par les mineurs et une vraie consultation devrait être organisée avec une autre méthode.</span></li>
</ul>
<p style="text-align: left;"><span style="font-weight: 400;">Au contraire, les arguments principaux avancés par les tenants du hard-fork sont :</span></p>

<ul style="text-align: left;">
 	<li><strong>Correction d'une situation anormale</strong><span style="font-weight: 400;">. Le pirate a exploité une fonction qui n'était pas prévue dans le code d'origine. Le code ne pouvait pas laisser supposer, à sa lecture, qu'une telle exploitation était possible. Par conséquent, le piratage relève d'un comportement anormal du </span><i><span style="font-weight: 400;">smart-contract</span></i><span style="font-weight: 400;">. La correction des conséquences de cette exploitation étant possible techniquement, il serait anormal de ne pas procéder à cette correction compte tenu des sommes en jeu. A ce titre, l'argument de la responsabilité individuelle ne serait pas acceptable car même des experts en sécurité qui ont revu le contrat n'ont rien trouvé à dire. Il ne serait donc pas possible de dire que le contrat comprenait dans son code l'indication qu'il pouvait être hacké.</span></li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Ampleur des dégâts</strong>. Le changement pour The DAO se justifierait par l'ampleur des dégâts. Si un autre bug de cet ampleur arrive, il est bon que les mineurs puissent aussi le corriger. Mais ceci n'implique pas une autorisation de hard-fork pour n'importe quelle raison, puisque un hard-fork nécessite en tout état de cause un consensus des mineurs qui ne sera pas atteint si la communauté s'oppose au changement.</li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Gouvernance effective</strong>. Le passage du hard-fork montrerait qu'une réelle gouvernance existe dans Ethereum et que les situations anormales ne sont pas tolérées par les acteurs de cette blockchain. Elles sont mêmes corrigées lorsque l'importance des anomalies le justifie. Le message qui passerait auprès des médias et des acteurs économiques est que les problèmes structurels posés par l'exécution de certaines transactions sont examinés et corrigés par la communauté. Ceci serait à terme positif pour la viabilité d’Ethereum et son utilisation concrète dans la vie de tous les jours.</li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Justice</strong><span style="font-weight: 400;">. Le pirate a volé ces ethers. Il serait injuste de ne pas restituer ces sommes aux investisseurs alors que cela est possible. Cela serait envoyer un très mauvais signal si la communauté décidait sciemment de laisser un voleur s'en tirer avec les produits d'un vol, ou limiterait son intervention à un gel des avoirs du voleur sans faire de démarche pour indemniser les victimes.</span></li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Possibilité technique</strong><span style="font-weight: 400;">. Que le hard-fork passe ou non, il est possible techniquement de réaliser cette opération. Par conséquent, les soi-disant conséquences sur l'immuabilité de la blockchain sont inexistantes : la blockchain n'est d'ores et déjà pas immuable. C'est uniquement le consensus des mineurs qui la rend immuable à un instant T. Mais ils peuvent à tout moment modifier la blockchain lorsqu'ils sont tous d'accord sur la modification. La blockchain n'a jamais été immuable : elle est immuable jusqu'à ce que le consensus en décide autrement.</span></li>
</ul>
<ul style="text-align: left;">
 	<li><strong>Protection juridique</strong><span style="font-weight: 400;">. Dans le cas où les investisseurs seraient remboursés, les conséquences dommageables du hack pour les acteurs impliqués dans le fiasco de <em>The DAO</em> et dans l’Ethereum dans son ensemble pourraient sans doute être limitées. Dans le cas contraire, il est à craindre que des organismes comme la SEC américaine ou l’AMF française soient poussés par cet événement à légiférer sur la blockchain.</span></li>
</ul>
<p style="text-align: left;"><span style="font-weight: 400;">L</span><span style="font-weight: 400;">es tenants du hard-fork souhaitent donc résoudre le problème posé par </span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;"> de la façon la plus rapide et efficace, même si cela implique une modification rétroactive des transactions dans la blockchain et des conséquences à long terme sur la perception d’Ethereum. Les opposants s'en tiendront au principe d'immuabilité de la blockchain car ils considèrent que le problème ne vient pas du réseau lui-même, mais de quelque chose qui a été développé dessus (</span><i><span style="font-weight: 400;">The DAO</span></i><span style="font-weight: 400;">).</span></p>
<p style="text-align: left;">En pratique, la question ne sera pas résolue immédiatement. Il faudra d'abord attendre la mise en oeuvre du soft-fork, puis les inévitables débats qui s'ensuivront, avant que les développeurs proposent (ou non) leur idée du hard fork aux mineurs, qui décideront ou non de l'accepter ! La route est encore longue, mais nous suivrons bien entendu les développements avec attention.</p>
<p style="text-align: left;"><em><span style="font-weight: 400;">Et vous, qu’en pensez-vous ? Hard fork ou non ?</span></em></p>